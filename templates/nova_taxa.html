{% extends 'templateDashboard.html' %}

{% block conteudo %}
<div class="container">
    {% include 'components/sidebar.html' %}
    <div class="main-content">
        <!-- Mensagem Flash POSICIONADA ACIMA do formulário -->
        <div class="flash-messages-top">
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="flash-message flash-{{ category }}">
                <span class="flash-icon">
                    {% if category == 'success' %}
                    ✓
                    {% elif category == 'error' %}
                    ✕
                    {% else %}
                    ℹ
                    {% endif %}
                </span>
                <span class="flash-text">{{ message }}</span>
                <button class="flash-close" onclick="this.parentElement.style.display='none'">&times;</button>
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}
        </div>

        <div class="form-container">
            <div class="form-card">
                <h1>Nova Taxa</h1>

                <form action="" method="post">
                    <div class="form-group">
                        <label for="ano">Ano:</label>
                        <input name="ano" id="ano" type="text" class="form-input" value="{{ ano_atual }}" readonly>
                    </div>

                    <div class="form-group">
                        <label for="taxa">Quantidade Taxa:</label>
                        <input name="taxa" id="taxa" type="text" class="form-input" placeholder="Ex: 1.5" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-secondary">Adicionar Taxa</button>
                        <a href="{{url_for('taxas')}}" class="btn-primary">Cancelar</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
.flash-messages-top {
    margin-bottom: 20px;
    width: 100%;
}

.flash-message {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    border-radius: 4px;
    margin-bottom: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    animation: slideIn 0.3s ease-out;
    width: 100%;
}

.flash-success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.flash-error {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.flash-info {
    background-color: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}

.flash-icon {
    margin-right: 10px;
    font-weight: bold;
}

.flash-text {
    flex-grow: 1;
}

.flash-close {
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    color: inherit;
    opacity: 0.7;
}

.flash-close:hover {
    opacity: 1;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.form-container {
    margin-top: 0;
}

.form-card h1 {
    margin-bottom: 20px;
}

.form-group {
    margin-bottom: 15px;
}
</style>
{% endblock %}